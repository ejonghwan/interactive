<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    
    <style>
        *{padding: 0; margin: 0;}
        html, body, canvas {width: 100%; height: 100%;;}
    </style>


<script>

    class App {
        constructor() {
            console.log('app')
            this.canvas = document.createElement('canvas');
            document.body.appendChild(this.canvas)
            this.ctx = this.canvas.getContext('2d')


            this.pixelNum = 6;
            
            this.isLoaded = false;

            this.resize()
            window.addEventListener('resize', this.resize.bind(this));
        }

        resize() {
            this.stageWidth = document.body.clientWidth;
            this.stageHeight = document.body.clientHeight;
            this.canvas.width = this.stageWidth * 2;
            this.canvas.height = this.stageHeight * 2;
            this.ctx.scale(2, 2)

            this.image = new Image();
            this.image.src = '../05_/image493_2.jpg'
            this.image.onload = () => {
                this.isLoaded = true;
                this.imageDraw();
            }

            this.imgPos = {
                x: 0,
                y: 0,
                width: 0,
                height: 0,
            }

        }

        imageDraw() {
            this.ctx.drawImage(this.image, 0, 0);
            this.imgData = this.ctx.getImageData(0, 0, this.stageWidth, this.stageHeight)
            this.pixelX = Math.round(this.stageWidth / this.pixelNum);
            this.pixelY = Math.round(this.stageHeight / this.pixelNum);

            console.log(this.pixelX, this.pixelY)

            this.dots = []

            for(let i = 0; i < this.imgData.data.length; i+=4) {
                const red = this.imgData.data[i] = 99
                const green = this.imgData.data[i+1] = 88
                const blue = this.imgData.data[i+2] = 77
                const ap = this.imgData.data[i+3] = 10
                const dot = new Dot(
                    0, 0,
                    30,
                    6,
                    red, green, blue, ap
                )

                this.dots[i] = dot
            }

            console.log(this.dots)

            // this.imgData.data[0] = 30
            console.log(this.imgData.data)


            

            
        }

        ani() {

        }
    }

    class Dot {
        constructor(x, y, radius, pixelSize, red, green, blue, ap) {
            this.x = x;
            this.y = y;
            this.radius = radius;
            this.pixelSize = pixelSize;
            this.red = red;
            this.green = green;
            this.blue = blue;
            this.ap
        }

        resize(stageWidth, stageHeight) {
            this.stageWidth = stageWidth;
            this.stageHeight = stageHeight;
        }


    }

    window.onload = () => {
        new App();
    }

</script>


</body>
</html>